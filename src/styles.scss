/* ===================================================================
   styles.scss — Praxis NeoSoft UI polish (v2)
   - Complementa o theme-neo-soft.v2.scss
   - Ajustes de layout, tipografia, espaçamentos e estados
   =================================================================== */

/* 0) Reset e base */
@use './theme-neo-soft';
@import "@angular/cdk/overlay-prebuilt.css";

/* O tema principal é carregado via @use './theme-neo-soft' acima */

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: 'Inter', 'Poppins', 'Roboto', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  color: var(--app-text, #2B2A28);
  background: var(--app-bg, #F4EEE8);
}

:root { color-scheme: light dark; }

/* 1) App shell */
.app-shell { min-height: 100vh; display: grid; grid-template-rows: auto 1fr auto; }

.app-toolbar {
  position: sticky; top: 0; z-index: 1000;
  background: #F5F3F1;
  color: #2B2A28;
  border-bottom: 1px solid #D8D3CF;
  display: flex; align-items: center;
}

.app-content {
  padding: clamp(12px, 3vw, 24px);
  min-height: 0;
  background: var(--app-bg, #F4EEE8);
  padding-bottom: 60px;
  display: flex;
  flex-direction: column;
}
.app-content > * { flex: 1 1 auto; min-height: 0; }

.app-footer { padding: 8px clamp(12px, 3vw, 24px); border-top: 1px solid #D8D3CF; font-size: 12px; color: color-mix(in oklab, #2B2A28, transparent 35%); background: color-mix(in oklab, #F5F3F1, transparent 20%); }

/* 2) Sidenav container (mínimo global)
   Observação: todo o estilo de menu (itens, submenus, estados)
   foi movido para o componente Sidebar. Aqui mantemos apenas
   regras neutras do container do MatSidenav. */
.app-drawer .mat-drawer-inner-container,
.mat-sidenav .mat-drawer-inner-container {
  overflow: hidden;              /* rolagem fica dentro do menu */
  display: flex;
  flex-direction: column;
}
.mat-sidenav.collapsible { transition: width .15s ease; }

/* Ícones Material Symbols: grade consistente */
.material-symbols-outlined,
.material-symbols-rounded,
.material-icons {
  font-variation-settings: 'FILL' 0, 'wght' 500, 'GRAD' 0, 'opsz' 24;
  font-size: 22px;           /* grade consistente */
  line-height: 1;            /* remove saltos */
  vertical-align: middle;    /* alinha com texto */
}
.mat-icon { font-size: 22px; line-height: 1; vertical-align: middle; }

/* Item de navegação: estilos do menu foram movidos para o SidebarComponent */

/* 3) Cartões e painéis */
.surface-card, .mat-mdc-card { background: #F5F3F1; color: #2B2A28; border: 1px solid #E8E2DE; border-radius: 14px; box-shadow: 0 1px 4px rgba(0,0,0,.08); }

/* Toolbar layout/title */
/* Toolbar title and spacing */
.app-title { font-family: 'Poppins', 'Inter', sans-serif; font-size: 22px; font-weight: 600; letter-spacing: .2px; line-height: 1.2; display: inline-flex; align-items: center; gap: 10px; margin: 0; }
.app-subtitle { font-family: 'Inter', 'Poppins', sans-serif; font-size: 14px; font-weight: 400; line-height: 1.4; color: #7A7174; margin: 0; }
.spacer { flex: 1 1 auto; }
.app-toolbar .material-symbols-outlined, .app-toolbar .material-icons { color: var(--app-primary, #3FBCA5); }

/* Conteúdo principal com fundo claro (área de conteúdo) */
.app-bg { background: var(--app-bg, #F4EEE8); }

/* Garante fundo quente também nos containers do Angular Material */
.mat-app-background,
.mat-sidenav-content,
.mat-drawer-content,
.app-content {
  background: var(--app-bg, #F4EEE8);
}

/* 4) Tipografia utilitária */
.px-section-title { font: 600 18px/1.2 'Poppins', 'Inter', sans-serif; margin: 12px 0 8px; }
.px-muted { color: var(--app-text-variant, #7A7174); }
.px-eyebrow { text-transform: uppercase; letter-spacing: .12em; font: 600 11px/1.4 'Inter', sans-serif; color: var(--app-text-variant, #7A7174); }

/* 5) Formularios (MDC) */
.mat-mdc-form-field {
  --mdc-outlined-text-field-outline-color: color-mix(in oklab, var(--app-text-variant, #7A7174), transparent 10%);
  --mdc-outlined-text-field-input-text-color: var(--app-text, #2B2A28);
  --mdc-outlined-text-field-hover-outline-color: var(--app-primary, #3FBCA5);
  --mdc-outlined-text-field-focus-outline-color: var(--app-primary, #3FBCA5);
}
.mat-mdc-form-field .mdc-notched-outline__leading,
.mat-mdc-form-field .mdc-notched-outline__notch,
.mat-mdc-form-field .mdc-notched-outline__trailing {
  border-radius: 0; /* segments remain square; container provides rounding */
}

/* 6) Botões (MDC) */
.mdc-button--raised, .mdc-button--unelevated {
  --mdc-filled-button-container-color: var(--app-primary, #3FBCA5);
  --mdc-filled-button-label-text-color: #fff;
}
.mdc-button--raised:hover, .mdc-button--unelevated:hover {
  --mdc-filled-button-container-color: var(--app-primary-hover, #4DC7B0);
}
.mdc-button--raised:active, .mdc-button--unelevated:active {
  --mdc-filled-button-container-color: var(--app-primary-pressed, #2da08d);
}
.mdc-button--outlined {
  --mdc-outlined-button-outline-color: var(--app-primary, #3FBCA5);
  --mdc-outlined-button-label-text-color: var(--app-primary, #3FBCA5);
}

/* 7) Focus ring unificado (acessibilidade) */
:where(button, [role="button"], a, .mat-mdc-button-base, input, select, textarea):focus-visible {
  outline: 3px solid color-mix(in oklab, var(--app-primary, #3FBCA5), white 20%);
  outline-offset: 2px;
  border-radius: 8px;
}

/* 7b) Ajuste de alinhamento dos ícones na barra do diálogo (Dynamic Form)
   Contexto: na UI usamos duas famílias de ícones (Material Icons e Material Symbols).
   No header do modal do formulário, os botões icônicos devem seguir a métrica do MDC (24px),
   independentemente de personalizações globais (ex.: 22px em navegação). Este bloco isola
   o ajuste apenas para o modal (classe .pfx-dialog-pane), evitando efeitos colaterais. */
.pfx-dialog-pane .dialog-header .mat-mdc-icon-button {
  height: 40px;
  width: 40px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.pfx-dialog-pane .dialog-header .mat-mdc-icon-button .mat-icon {
  font-size: 24px; /* baseline do MDC */
  line-height: 1;
  height: 24px;
  width: 24px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Right drawer (filter) — position and sizing */
/* Filter drawer container (dialog-as-drawer) */
.mat-mdc-dialog-container.filter-right-drawer {
  border-radius: 0;
  height: 100vh;
  padding: 0;
}

/* 8) Tabelas e listas */
.mat-mdc-table { border-radius: 12px; overflow: hidden; }
.mat-mdc-header-row { background: color-mix(in oklab, var(--app-surface-high, #F5F3F1), black 2%); }
.mat-mdc-row:nth-child(even) { background: color-mix(in oklab, var(--app-surface, #EDE6E1), black 1%); }
/* Hover perceptível tanto em linhas claras quanto escuras (zebra) */
praxis-table .mat-mdc-row:hover {
  background: color-mix(in oklab, var(--app-surface-high, #F5F3F1), black 6%) !important;
}
.theme-dark praxis-table .mat-mdc-row:hover {
  background: color-mix(in oklab, var(--app-surface, #2B2726), white 8%) !important;
}

/* Respiro entre ícone e texto em botões (sem afetar botões apenas com ícone) */
.mat-mdc-button-base .mat-icon:not(:only-child),
.mat-mdc-button-base .material-symbols-outlined:not(:only-child) {
  margin-right: 6px;
}

/* 9) Utilitários de layout */
.px-container { padding-inline: clamp(16px, 4vw, 32px); }
.px-grid { display: grid; gap: clamp(12px, 2vw, 20px); }
.px-grid.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.px-grid.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
@container (min-width: 900px) { .px-grid.responsive { grid-template-columns: repeat(12, 1fr); } }

/* 10) Scrollbars (suave e discreto) */
* { scrollbar-width: thin; scrollbar-color: color-mix(in oklab, var(--app-text-variant, #7A7174), transparent 35%) transparent; }
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background: color-mix(in oklab, var(--app-text-variant, #7A7174), transparent 35%);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

/* 11) Modo escuro — ajustes finos (quando não delegados ao theme) */
.theme-dark .app-footer {
  color: color-mix(in oklab, var(--app-text, #F5F3F1), transparent 40%);
  background: color-mix(in oklab, var(--app-surface-high, #332E2D), transparent 20%);
}
/* Estilos de .menu-item (escuro) movidos para o SidebarComponent */

/* 11b) Estilos de menu no modo claro foram movidos para o SidebarComponent */

.theme-light .surface-card, .theme-light .mat-mdc-card {
  background: #F5F3F1;
  border: 1px solid #E8E2DE;
  border-radius: 16px;
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
}

/* Rodapé flutuante estilo Grok */
.app-footer-floating {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  z-index: 10;
  text-align: center;

  font-family: 'Inter', sans-serif;
  font-size: 14px;
  font-weight: 400;
  color: var(--app-text-variant, #7A7174);

  background: color-mix(in oklab, var(--app-surface-high, #F5F3F1), transparent 65%);
  -webkit-backdrop-filter: blur(10px) saturate(160%);
  backdrop-filter: blur(10px) saturate(160%);
  border-top: 1px solid color-mix(in oklab, var(--app-outline-variant, #D8D3CF), transparent 40%);

  padding: 8px 16px;
  line-height: 1.4;
}
.theme-dark .app-footer-floating {
  background: rgba(47, 43, 42, 0.8);
  color: #C0BAB5;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
}

/* 12) Links coerentes com a paleta */
a { color: var(--app-primary, #3FBCA5); text-decoration: none; }
a:hover { text-decoration: underline; }

/* 13) Escala tipográfica M3 (utilitários) */
.typ-display-large  { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 57px; line-height: 64px; letter-spacing: 0; }
.typ-display-medium { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 45px; line-height: 52px; letter-spacing: 0; }
.typ-display-small  { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 36px; line-height: 44px; letter-spacing: 0; }

.typ-headline-large { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 32px; line-height: 40px; letter-spacing: 0; }
.typ-headline-medium{ font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 28px; line-height: 36px; letter-spacing: 0; }
.typ-headline-small { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 24px; line-height: 32px; letter-spacing: 0; }

.typ-title-large    { font-family: 'Poppins','Inter',sans-serif; font-weight: 500; font-size: 22px; line-height: 28px; letter-spacing: 0; }
.typ-title-medium   { font-family: 'Inter','Poppins',sans-serif; font-weight: 500; font-size: 16px; line-height: 24px; letter-spacing: 0.15px; }
.typ-title-small    { font-family: 'Inter','Poppins',sans-serif; font-weight: 500; font-size: 14px; line-height: 20px; letter-spacing: 0.1px; }

.typ-label-large    { font-family: 'Inter','Poppins',sans-serif; font-weight: 500; font-size: 14px; line-height: 20px; letter-spacing: 0.1px; }
.typ-label-medium   { font-family: 'Inter','Poppins',sans-serif; font-weight: 500; font-size: 12px; line-height: 16px; letter-spacing: 0.5px; text-transform: none; }
.typ-label-small    { font-family: 'Inter','Poppins',sans-serif; font-weight: 500; font-size: 11px; line-height: 16px; letter-spacing: 0.5px; text-transform: none; }

.typ-body-large     { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 16px; line-height: 24px; letter-spacing: 0.5px; }
.typ-body-medium    { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 14px; line-height: 20px; letter-spacing: 0.25px; }
.typ-body-small     { font-family: 'Inter','Poppins',sans-serif; font-weight: 400; font-size: 12px; line-height: 16px; letter-spacing: 0.4px; }

/* 14) Tabela (PraxisTable) — ajuste fino do header para o tema Heroes
   Aplica um leve contraste no cabeçalho e coerência de bordas. */
praxis-table {
  /* claro */
  --p-table-header-bg: color-mix(in oklab, var(--app-surface-high, #F5F3F1), black 4%);
  --p-table-header-fg: var(--app-text, #2B2A28);
  --p-table-border-color: color-mix(in oklab, var(--app-outline-variant, #D8D3CF), black 6%);
}
.theme-dark praxis-table {
  /* escuro */
  --p-table-header-bg: color-mix(in oklab, var(--app-surface, #2B2726), white 6%);
  --p-table-header-fg: var(--app-text, #F5F3F1);
  --p-table-border-color: color-mix(in oklab, var(--app-outline-variant, #3f3a38), white 8%);
}
